WikipediR::categories_in_page('https://en.wikipedia.org/wiki/Abbeville,_South_Carolina')
library(WikipediR)
categories_in_page(pages=c("Abbeville, South Carolina"))
?categories_in_page
categories_in_page("en", "wikipedia", pages = "New Age")
?wp_content
?page_content()
# page to get lat/lng coordinates of wikipedia page
# gets page text using wikipedir
wp_content <- page_content("en","wikipedia", page_name = "Abbeville, South Carolina")
wp_content
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/geocode_wikipedia_page.R")
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/geocode_wikipedia_page.R")
View(wp_content)
wp_content$parse$text
class(wp_content$parse$text)
wp_content$parse$text
wp_content$parse$text[[1]]
class(wp_content$parse$text[[1]])
View(wp_content$parse$text[[1]])
sink("test.txt")
wp_content$parse$text[[1]]
sink()
library(stringr)
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/geocode_wikipedia_page.R")
str_extract(text,"<span class=\\"geo\\">(.*?)<\/span>")
str_extract(text,"<span class=\\\"geo\\\">(.*?)<\\/span>")
str_extract(text,"(?<=<span class=\\\"geo\\\">)(.*?)(?=<\\/span>))
)
str_extract(text,"(?<=<span class=\\\"geo\\\">)(.*?)(?=<\\/span>")")
str_extract(text,"(?<=<span class=\\\"geo\\\">)(.*?)(?=<\\/span>)")
strsplit(coords_text,';')
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/geocode_wikipedia_page.R")
strsplit(coords_text,';')
strsplit(coords_text,';')[[1]]
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/geocode_wikipedia_page.R")
coord_list
as.numeric(coord_list)
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/geocode_wikipedia_page.R")
geocode_wikipedia_page("Abbeville, South Carolina")
geocode_wikipedia_page("Abbeville Opera House")
rm(list=ls())
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/geocode_wikipedia_page.R")
geocode_wikipedia_page("Abbeville, South Carolina")
search_string= 'anchorage ak'
search_url = paste0("https://www.google.com/search?q=site%3A+https%3A%2F%2Fwww.wikipedia.org%2F+",
stringr::str_replace_all(search_string," ","+"))
search_url
page <- rvest::read_html(search_url)
page
page
page %>% rvest::html_elements("a h3")
page %>% rvest::html_elements("a h3") %>% rvest::html_text()
page %>% rvest::html_elements("a h3") %>% rvest::html_attr("href")
page %>% rvest::html_nodes("a h3") %>% rvest::html_attr("href")
page %>% rvest::html_nodes("a h3")
page %>% rvest::html_nodes("a h3") %>% html_attr("href")
page %>% rvest::html_nodes("a h3") %>% rvest::html_attr("href")
page %>% rvest::html_nodes("a") %>% rvest::html_attr("href")
page %>% rvest::html_nodes("a")
page %>% rvest::html_nodes("a") %>% rvest::html_attrs('href')
page %>% rvest::html_nodes("a") %>% rvest::html_attr('href')
page %>% rvest::html_nodes("a h3") %>% rvest::html_attr('href')
page %>% rvest::html_nodes("a h3")
page %>% rvest::html_nodes("[class = 'a h3]'")
page %>% rvest::html_nodes("[class = 'h3]'")
page %>% rvest::html_nodes("h3")
page %>% rvest::html_nodes("class=h3")
page %>% rvest::html_nodes("[class=h3]")
page %>% rvest::html_nodes("[class='h3']")
page %>% rvest::html_nodes("h3 a")
page %>% rvest::html_nodes("h3")
page %>% rvest::html_nodes(css="h3 a")
page %>% rvest::html_nodes("h3 a")
page %>% rvest::html_nodes("a h3")
library(rvest)
page %>% rvest::html_element("a h3")
page %>% rvest::html_elements("a h3")
page %>% rvest::html_elements("a h3") %>% html_attr('href')
page %>% rvest::html_elements("a h3") %>% html_attrs('href')
?html_element
page %>% rvest::html_elements(css="a h3") %>% html_attrs('href')
page %>% rvest::html_elements(css="a h3")
page %>% rvest::html_elements(css="a h3") %>% html_attr('href')
page %>% rvest::html_elements(css="h3") %>% html_attr('href')
page %>% rvest::html_elements(css="h3 a")
page %>% rvest::html_elements(css="[h3]")
page %>% rvest::html_elements(css="['h3']")
page %>% rvest::html_elements(css="h3")
page %>% rvest::html_elements(css="h3") %>% html_element('a')
page %>% rvest::html_elements(css='a')
page %>% rvest::html_elements(css='a') %>% html_attr('href')
page %>% rvest::html_elements(css='h3')
page %>% rvest::html_elements(css='h3') %>% html_elements('a')
page %>% rvest::html_elements(css='h3') %>% html_element('a')
page %>% rvest::html_elements(css='h3') %>% html_element('href')
page %>% rvest::html_elements(xpath ='//a//h3')
page %>% rvest::html_elements(xpath ='//a//h3') %>% html_attr('href')
page %>% rvest::html_elements(xpath ='//a//h3 a')
page %>% rvest::html_elements(xpath ='//a//h3 //a')
page %>% xml_nodes("//a//h3")
page %>% xml_node("//a//h3")
page %>% html_element("//h3")
page %>% html_element(xpath="//h3")
page %>% html_element(xpath="//h3") %>% html_attr("href")
page %>% html_element(xpath="//h3 a") %>% html_attr("href")
page %>% html_element(xpath="//h3 a")
page %>% html_element(xpath="//h3 //a")
page %>% html_element(xpath="[//h3]")
page %>% html_element(xpath="['//h3']")
(html_nodes(page, "a")
)
html_attr(html_nodes(pg, "a"), "href")
html_attr(html_nodes(page, "a"), "href")
html_attr(html_nodes(page, "h3"), "href")
html_attr(html_nodes(page, "a h3"), "href")
page %>% html_name("h3 a")
page %>% html_name()
page %>% html_elements("a h3")
page %>% html_elements("a")
page %>% html_elements("//a")
page %>% html_elements(xpath="//a")
page %>% html_elements(xpath="//h3")
page %>% html_elements(xpath="//h3//a")
page %>% html_elements(xpath="//h3")
page %>% html_elements(xpath="//a//h3")
page %>% html_elements(xpath="//a")
results_text
results_text <- page %>% rvest::html_elements("a h3") %>% rvest::html_text()
results_tect
results_text
page %>% html_elements(xpath="//a")
page %>% html_elements(xpath="//a") %>% html_text()
results_text
html_nodes(page, xpath = "//div/div/div/a/h3") %>% html_text()
html_nodes(page, xpath = "//div/div/div/a/h3")
html_nodes(page, xpath = "//div/div/div/a/h3") %>% htnl_attr('href')
html_nodes(page, xpath = "//div/div/div/a/h3") %>% html_attr('href')
html_nodes(page, xpath = "//div/div/div/a/") %>% html_attr('href')
html_nodes(page, xpath = "//div/div/div/a") %>% html_attr('href')
html_nodes(page, xpath = "//div/div/div/a")
html_nodes(page, xpath = "//div/div/div/a") %>% html_text()
html_nodes(page, xpath = "//h3")
html_nodes(page, xpath = "/h3")
html_nodes(page, xpath = "//a//h3")
html_nodes(page, xpath = "//a")
html_nodes(page, xpath = "//a/h3")
html_nodes(page, xpath = "//a")
all_links = html_nodes(page, xpath = "//a")
all_links %>% html_text()
all_links
all_links[10]
as.character(all_links[10])
all_links %>% html_attr()
all_links %>% html_text()
results_text <- page %>% rvest::html_elements("a h3") %>% rvest::html_text()
all_links = html_nodes(page, xpath = "//a")
results_text
all_links %>% html_text()
page %>% html_elements(".DKV0Md")
page %>% html_elements(xpath="//*[contains(concat( " ", @class, " " ), concat( " ", "DKV0Md", " " ))]")
page %>% html_elements(xpath='//*[contains(concat( " ", @class, " " ), concat( " ", "DKV0Md", " " ))]')
page %>% html_element(h3)
page %>% html_element('h3')
page %>% html_element('h3 a')
page %>% html_element('a')
page %>% html_element('/a')
page %>% html_elements('a')
page %>% html_elements('a') %>% html_text()
results <- page %>% html_elements('a')
results
str_detect(results %>% html_text,"›")
results[str_detect(results %>% html_text,"›")]
results[str_detect(results %>% html_text,"›")] %>% html_text()
results[str_detect(results %>% html_text,"›")] %>% html_attr('href')
results <- page %>% html_elements('a')
pages_indices <- results_text
results_links <- results[str_detect(results %>% html_text,"›")] %>% html_attr('href')
results_text <- results[str_detect(results %>% html_text,"›")] %>% html_text()
View(data.frame(text=results_text,links=results_links))
results_links
results_links[1]
results[str_detect(results %>% html_text,"›")]
results
results %>% html_attr('href')
page %>% html_elements('//a')
page %>% html_elements(xpath='//a')
page %>% html_elements(xpath='//a') %>% html_attr('href')
(html_attr(html_nodes(page, "a"), "href"))
# scrape google search results
page <- rvest::read_html(search_url)
results <- page %>% html_elements('a')
pages_indices <- results_text
results_links <- results[str_detect(results %>% html_text,"›")] %>% html_attr('href')
results_text <- results[str_detect(results %>% html_text,"›")] %>% html_text()
results_links
results_links[1]
results_links[3]
page
page %>% html_node('a')
page %>% html_nodes('a')
page %>% html_nodes('a') %>% html_attr('href')
str_extract(results_links[1],".*&sa")
str_extract(results_links[1],".*(?=&sa)")
str_extract(results_links[1],"(?<=/urlq\\=).*(?=&sa)")
str_extract(results_links[1],"(?<=/url\\?q\\=).*(?=&sa)")
str_extract(results_links,"(?<=/url\\?q\\=).*(?=&sa)")
str_detect(results %>% html_text,"›")
# search url
search_url = paste0("https://www.google.com/search?q=site%3A+https%3A%2F%2Fwww.wikipedia.org%2F+",
stringr::str_replace_all(search_string," ","+"))
# scrape google search results
page <- rvest::read_html(search_url)
results <- page %>% html_elements('a')
page_mask <- str_detect(results %>% html_text,"›")
results_links <- results[page_mask] %>% html_attr('href')
results_text <- results[page_mask] %>% html_text()
# clean results links
result_links = str_extract(results_links,"(?<=/url\\?q\\=).*(?=&sa)")
result_links
rm(list=ls())
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/find_wikipedia_page.R", encoding = 'UTF-8')
search_google_for_wikipedia_page("anchoirage ak")
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/find_wikipedia_page.R", encoding = 'UTF-8')
search_for_wikipedia_page('anchorage ak')
search_for_wikipedia_page('anchorage ak', use_first_result = FALSE)
devtools::document()
warnings()
devtools::install("wikipediageocoder")
devtools::install()
devtools::document()
devtools::install()
devtools::document()
warnings()
devtools::install()
rm(list=ls())
library(wikipediageocoder)
x=search_for_wikipedia_page("anchorage ak")
x
search_string= 'anchorage ak'
# search url
search_url = paste0("https://www.google.com/search?q=site%3A+https%3A%2F%2Fwww.wikipedia.org%2F+",
stringr::str_replace_all(search_string," ","+"))
# scrape google search results
page <- rvest::read_html(search_url)
page %>% html_elements("h3")
page %>% html_elements("h3") %>% html_attr()
page %>% html_elements("h3") %>% html_text()
page %>% html_elements("h3") %>% html_text() %>% str_extract(".*-")
page %>% html_elements("h3") %>% html_text() %>% str_extract(".*(?=-)")
page %>% html_elements("h3") %>% html_text() %>% str_extract(".*(?= -)")
geocode_wikipedia_page('Anchorage metropolitan area')
geocode_wikipedia_page('Alaska')
geocode_wikipedia_page('History of Anchorage, Alaska')
geocode_wikipedia_page('Anchorage, Alaska')
page %>% html_elements("h3") %>% html_text() %>% str_extract(".*(?= -)")
results_text <- page %>% html_elements("h3") %>% html_text()
result_page_name <- page %>% html_elements("h3") %>% html_text() %>% str_extract(".*(?= -)")
result_page_name
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/find_wikipedia_page.R", encoding = 'UTF-8')
search_for_wikipedia_page("anchorage ak")
rm(list=ls())
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/find_wikipedia_page.R", encoding = 'UTF-8')
search_for_wikipedia_page("anchorage ak")
rm(list=ls())
devtools::document()
warnings()
devtools::document()
devtools::document()
devtools::install()
library(wikipediageocoder)
search_for_wikipedia_page("anchorage ak")
devtools::install()
rm(list=ls())
devtools::install()
rm(list=ls())
getwd()
devtools::install()
devtools::document()
devtools::document()
devtools::document
devtools::document()
devtools::document()
getwd()
devtools::install()
install.packages("devtools")
devtools::document()
install.packages("rlang")
install.packages("rlang")
devtools::document()
warnings()
devtools::document()
warnings()
devtools::document()
devtools::install()
library(wikipediageocoder)
search_for_wikipedia_page('anchor ak')
dplyr::%>%
dplyr::`%>%`
mtcars dplyr::`%>%` dplyr::select(cyl)
rm(list=ls())
devtools::document()
devtools::install()
library(wikipediageocoder)
search_for_wikipedia_page('anchor ak')
rm(list=ls())
devtools::document()
devtools::install()
library(wikipediageocoder)
search_google_for_wikipedia_page("anchor ak")
search_for_wikipedia_page("anchor ak")
devtools::install()
rm(list=ls())
library(wikipediageocoder)
search_for_wikipedia_page("anchor ak")
rm(list=ls())
devtools::document()
devtools::install()
library(wikipediageocoder)
search_for_wikipedia_page("anchor ak")
rm(list=ls())
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/find_wikipedia_page.R", encoding = 'UTF-8')
search_for_wikipedia_page('anchor ak')
rm(list=ls())
devtools::document()
devtools::install()
library(wikipediageocoder)
search_for_wikipedia_page('anchor ak')
geocode_wikipedia_page("Anchorage, Alaska")
?search_google_for_wikipedia_page
search_for_wikipedia_page("anchor ak")
rvest::html_text()
rvest::html_text('a')
rm(list=ls())
devtools::document()
devtools::install()
library(wikipediageocoder)
search_for_wikipedia_page("anchor ak")
library(xml2)
devtools::document()
devtools::install()
library(wikipediageocoder)
search_for_wikipedia_page("anchor ak")
devtools::use_vignette("introduction")
usethat::use_vignette("introduction")
install.packages('usethat')
usethat::use_vignette("introduction")
library(wikipediageocoder)
search_for_wikipedia_page("anchorage ak")
search_for_wikipedia_page("mare island navy yard")
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/find_wikipedia_page.R", encoding = 'UTF-8')
search_for_wikipedia_page("mare island navy yard")
rm(list=ls())
source("C:/Users/Seldon/Desktop/wikipediageocoder/R/find_wikipedia_page.R", encoding = 'UTF-8')
search_for_wikipedia_page("mare island navy yard")
rm(list=ls())
devtools::document()
devtools::install()
library(wikipediageocoder)
search_for_wikipedia_page("mare island navy yard")
uninstall
remove.packages("wikipediageocoder")
devtools::document()
devtools::install()
library(wikipediageocoder)
search_for_wikipedia_page("anchir ak")
rm(list=ls())
devtools::document()
devtools::install()
browseVignettes("wikipediageocoder")
browseVignettes("ggplot2")
browseVignettes("wikipediageocoder")
devtools::build_vignettes()
devtools::document()
devtools::install()
browseVignettes("wikipediageocoder")
devtools::install(build_vignettes = TRUE)
browseVignettes("wikipediageocoder")
